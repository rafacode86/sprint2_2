-- MySQL Script generated by MySQL Workbench
-- Wed Jun 25 12:30:01 2025
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema optica_cul_ampoolla
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema optica_cul_ampoolla
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `optica_cul_ampoolla` DEFAULT CHARACTER SET utf8mb3 ;
USE `optica_cul_ampoolla` ;

-- -----------------------------------------------------
-- Table `optica_cul_ampoolla`.`cliente`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `optica_cul_ampoolla`.`cliente` (
  `id_cliente` INT NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `apellido1` VARCHAR(45) NOT NULL,
  `apellido2` VARCHAR(45) NULL DEFAULT NULL,
  `telefono` VARCHAR(15) NULL DEFAULT NULL,
  `direccion` VARCHAR(150) NULL DEFAULT NULL,
  `mail` VARCHAR(45) NULL DEFAULT NULL,
  `fecha_ingreso` VARCHAR(45) NULL DEFAULT NULL,
  `id_cliente_recomendador` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id_cliente`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `optica_cul_ampoolla`.`proveedor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `optica_cul_ampoolla`.`proveedor` (
  `id_proveedor` INT NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `nif` VARCHAR(10) NOT NULL,
  `telefono` VARCHAR(15) NULL DEFAULT NULL,
  `fax` VARCHAR(15) NULL DEFAULT NULL,
  `direccion` VARCHAR(100) NULL DEFAULT NULL,
  `ciudad` VARCHAR(45) NULL DEFAULT NULL,
  `codigo_postal` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id_proveedor`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `optica_cul_ampoolla`.`marca`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `optica_cul_ampoolla`.`marca` (
  `id_marca` INT NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `proveedor` INT NOT NULL,
  PRIMARY KEY (`id_marca`),
  INDEX `id_proveedor_idx` (`proveedor` ASC) VISIBLE,
  CONSTRAINT `id_proveedor`
    FOREIGN KEY (`proveedor`)
    REFERENCES `optica_cul_ampoolla`.`proveedor` (`id_proveedor`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `optica_cul_ampoolla`.`gafa`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `optica_cul_ampoolla`.`gafa` (
  `id_gafa` INT NOT NULL,
  `id_marca` INT NOT NULL,
  `tipo` VARCHAR(45) NULL DEFAULT NULL,
  `color_montura` VARCHAR(45) NULL DEFAULT NULL,
  `color_lentes` VARCHAR(45) NULL DEFAULT NULL,
  `graduacion` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id_gafa`),
  INDEX `id_marca_idx` (`id_marca` ASC) VISIBLE,
  CONSTRAINT `id_marca`
    FOREIGN KEY (`id_marca`)
    REFERENCES `optica_cul_ampoolla`.`marca` (`id_marca`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `optica_cul_ampoolla`.`vendedor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `optica_cul_ampoolla`.`vendedor` (
  `id_vendedor` INT NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `apellido` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id_vendedor`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `optica_cul_ampoolla`.`venta`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `optica_cul_ampoolla`.`venta` (
  `id_venta` INT NOT NULL,
  `id_vendedor` INT NOT NULL,
  `id_cliente` INT NOT NULL,
  `id_gafa` INT NOT NULL,
  PRIMARY KEY (`id_venta`),
  INDEX `id_cliente_idx` (`id_cliente` ASC) VISIBLE,
  INDEX `id_vendedor_idx` (`id_vendedor` ASC) VISIBLE,
  INDEX `id_gafa_idx` (`id_gafa` ASC) VISIBLE,
  CONSTRAINT `id_cliente`
    FOREIGN KEY (`id_cliente`)
    REFERENCES `optica_cul_ampoolla`.`cliente` (`id_cliente`),
  CONSTRAINT `id_gafa`
    FOREIGN KEY (`id_gafa`)
    REFERENCES `optica_cul_ampoolla`.`gafa` (`id_gafa`),
  CONSTRAINT `id_vendedor`
    FOREIGN KEY (`id_vendedor`)
    REFERENCES `optica_cul_ampoolla`.`vendedor` (`id_vendedor`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;
INSERT INTO cliente (id_cliente, nombre, apellido1, apellido2, telefono, direccion, mail, fecha_ingreso, id_cliente_recomendador) VALUES
(7, 'Lucía', 'Martínez', 'Gómez', '600123456', 'Calle Falsa 123, Madrid', 'lucia.martinez@gmail.com', '2023-01-15', 1),
(8, 'Carlos', 'Ruiz', 'Fernández', '611987654', 'Av. del Sol 45, Sevilla', 'carlos.ruiz@hotmail.com', '2023-02-10', 1),
(9, 'Ana', 'López', 'Sánchez', '622456789', 'Calle Luna 78, Valencia', 'ana.lopez@yahoo.es', '2023-03-05', 2),
(10, 'Pedro', 'García', 'Morales', '633333333', 'Calle Mar 21, Málaga', 'pedro.garcia@gmail.com', '2023-04-20', 1),
(11, 'Marta', 'Torres', 'Delgado', '644444444', 'Av. Libertad 10, Barcelona', 'marta.torres@gmail.com', '2023-05-15', 3),
(12, 'Diego', 'Serrano', 'Jiménez', '655555555', 'Paseo del Prado 3, Madrid', 'diego.serrano@outlook.com', '2023-06-01', 1);
INSERT INTO gafa (id_gafa, id_marca, tipo, color_montura, color_lentes, graduacion) VALUES
(1, 1, "pasta", "azul", "sin color", "-2.00 / -2.50"),
(2, 1, "ranura", "gris", "negro", "+1.00 /+0.50"),
(3, 2, "taladro", "rojo", "sin color", "-5.00 / -6.00"),
(4, 2, "pasta", "negro", "azul", "-0.50 / +0.00"),
(5, 3, "metal", "negro", "marrón", "+0.00 / +0.00");
INSERT INTO marca (id_marca, nombre, proveedor) VALUES
(1, "ray ban", 1),
(2, "prada", 1),
(3, "cartier", 2);
INSERT INTO proveedor (id_proveedor, nombre, nif, telefono, fax, direccion, ciudad, codigo_postal) VALUES
(1, "luxottica", "B555222369", "938654477", "938654477", "calle falsa 123", "cornella", "08436"),
(2, "kering", "B555222996", "914560011", "914560011", "calle te sableo 1000", "milan", "03654");
INSERT INTO vendedor (id_vendedor, nombre, apellido) VALUES
(1, "nico", "sandu"),
(2, "alba", "del rio"),
(3, "daniel", "martin");
INSERT INTO venta (id_venta, id_vendedor, id_cliente, id_gafa) VALUES
(1,1,1,2),
(2,3,3,3),
(3,2,3,1),
(4,1,2,1),
(5,3,4,1),
(6,2,5,2);
SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
